(this.webpackJsonpui_v2=this.webpackJsonpui_v2||[]).push([[9],{1380:function(e,t,n){"use strict";n.r(t);var a=n(2),r=n(7),i=n(0),c=n(65),o=n(301),s=n(233),u=n(12),l=n(17),f=n(13),d=n(669),b=n(41),m=n(54),v=n(133),x=n(6),g=n(654),R=n(5),h=n(131),j=n(27),O=n(19),p=n(72),y=n(1);function N(e){var t,n=e.batch,a=e.index,r=e.observer,c=i.useRef(null);return i.useEffect((function(){c.current&&r&&r.observe(c.current)}),[r]),Object(y.jsx)(u.a,{children:Object(y.jsxs)("div",{className:"RunDetailMetricsTab__container__chartContainer","data-name":n.name,"data-context":Object(m.a)(n.context),ref:c,children:[Object(y.jsx)("div",{className:"RunDetailMetricsTab__container__chartContainer__chartBox",children:n.iters?Object(y.jsx)(u.a,{children:Object(y.jsx)(g.a,{data:[{key:n.key,data:{xValues:Object(x.a)(n.iters),yValues:Object(x.a)(n.values)},color:"#1c2852",dasharray:"none",selectors:[n.key]}],index:a,axesScaleType:{xAxis:O.f.Linear,yAxis:O.f.Linear},ignoreOutliers:!1,highlightMode:h.a.Off,curveInterpolation:O.d.Linear})}):Object(y.jsx)(R.l,{})}),Object(y.jsxs)("div",{className:"RunDetailMetricsTab__container__chartContainer__metricDetailBox",children:[Object(y.jsx)(R.n,{component:"h4",tint:100,size:18,weight:600,className:"RunDetailMetricsTab__container__chartContainer__metricDetailBox__metricName",children:Object(b.a)(null===n||void 0===n?void 0:n.name)?Object(p.a)(null===n||void 0===n?void 0:n.name):null===n||void 0===n?void 0:n.name}),null===(t=Object(m.a)(null===n||void 0===n?void 0:n.context))||void 0===t?void 0:t.split(",").map((function(e,t){return Object(y.jsx)(R.b,{monospace:!0,size:"large",color:j.c[0][(t+a)%j.c[0].length],label:e||"Empty context"},t)}))]})]})})}var _=i.memo(N);function S(e){var t=e.runHash,n=e.runTraces,x=e.runBatch,g=e.isSystem,R=e.isRunBatchLoading,h=i.useRef(null),j=i.useRef(),O=i.useState(!1),p=Object(r.a)(O,2),N=p[0],S=p[1],A=i.useState([]),C=Object(r.a)(A,2),T=C[0],w=C[1];return i.useEffect((function(){if(h.current){var e,t={root:null===(e=h.current.parentElement)||void 0===e?void 0:e.parentElement,rootMargin:"0px",threshold:0};j.current=new IntersectionObserver((function(e){var t=[];e.forEach((function(e){if(e.isIntersecting){var n=e.target.getAttribute("data-name"),a=e.target.getAttribute("data-context");(null===x||void 0===x?void 0:x.find((function(e){return e.name===n&&Object(m.a)(e.context)===a})))||t.push({name:n,context:a})}})),t.length>0&&w((function(e){return e.concat(t.map((function(e){return n.metric.find((function(t){return t.name===e.name&&Object(m.a)(t.context)===e.context}))})))}))}),t),S(!0)}return f.a(l.a.runDetails.tabs[g?"system":"metrics"].tabView),function(){j.current&&j.current.disconnect()}}),[g,x,N,n.metric]),i.useEffect((function(){var e,n;return T.length>0&&(e=window.setTimeout((function(){(n=d.a.getRunMetricsBatch(T,t)).call()}),100)),function(){e&&clearTimeout(e),n&&n.abort()}}),[T,t]),i.useEffect((function(){w((function(e){return e.filter((function(e){return-1===x.findIndex((function(t){return t.name===e.name&&Object(m.a)(t.context)===Object(m.a)(e.context)}))}))}))}),[x]),Object(y.jsx)(u.a,{children:Object(y.jsx)(s.a,{isLoading:R,className:"runDetailParamsTabLoader",height:"100%",children:c.a.isEmpty(n.metric)?Object(y.jsx)(o.a,{size:"xLarge",className:"runDetailParamsTabLoader",title:"No tracked ".concat(g?"system":""," metrics")}):Object(y.jsx)("div",{className:"RunDetailMetricsTab",ref:h,children:Object(y.jsx)("div",{className:"RunDetailMetricsTab__container",children:N&&n.metric.filter((function(e){return g?Object(b.a)(e.name):!Object(b.a)(e.name)})).map((function(e){return Object(a.a)(Object(a.a)({},e),{},{sortKey:"".concat(e.name,"_").concat(Object(m.a)(e.context))})})).sort(Object(v.a)({orderBy:"sortKey"})).map((function(e,t){var n=Object(a.a)(Object(a.a)({},e),null===x||void 0===x?void 0:x.find((function(t){return t.name===e.name&&Object(m.a)(t.context)===Object(m.a)(e.context)})));return Object(y.jsx)(_,{batch:n,index:t,observer:j.current},"".concat(n.name,"_").concat(Object(m.a)(n.context)))}))})})})})}t.default=i.memo(S)},625:function(e,t,n){"use strict";n.d(t,"c",(function(){return a})),n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return o}));var a=100,r={S:4,M:6,L:12},i=r.S,c=r.M,o={1:[r.L],2:[c,c],3:[i,i,i],4:[c,c,c,c],5:[i,i,i,c,c],6:[i,i,i,i,i,i],7:[i,i,i,c,c,c,c],8:[i,i,i,i,i,i,c,c],9:[i,i,i,i,i,i,i,i,i]}},654:function(e,t,n){"use strict";var a=n(0),r=n.n(a),i=n(15),c=n.n(i),o=n(12),s=n(625),u=n(232),l=n(19),f=(n(655),n(1)),d=r.a.forwardRef((function(e,t){var n=e.data,a=e.index,i=void 0===a?0:a,d=e.nameKey,b=void 0===d?"":d,m=e.aggregatedData,v=e.aggregationConfig,x=e.syncHoverState,g=e.axesScaleType,R=e.axesScaleRange,h=e.ignoreOutliers,j=e.alignmentConfig,O=e.highlightMode,p=e.curveInterpolation,y=e.chartTitle,N=e.zoom,_=e.onZoomChange,S=e.readOnly,A=void 0!==S&&S,C=e.resizeMode,T=r.a.useRef({margin:{top:30,right:20,bottom:30,left:60},height:0,width:0}),w=r.a.useRef({height:0,width:0}),D=r.a.useRef(null),B=r.a.useRef(null),L=r.a.useRef(null),M=r.a.useRef(null),k=r.a.useRef(null),z=r.a.useRef(null),E=r.a.useRef(null),H=r.a.useRef(null),I=r.a.useRef(null),K=r.a.useRef(null),F=r.a.useRef(null),V=r.a.useRef({}),q=r.a.useRef({}),J=r.a.useRef({}),P=r.a.useRef({}),Z=r.a.useRef(),G=[];function Q(){Object(l.h)({visAreaRef:B}),function(){Object(l.i)({index:i,nameKey:b,visBoxRef:T,plotBoxRef:w,parentRef:D,visAreaRef:B,svgNodeRef:L,bgRectNodeRef:M,plotNodeRef:k,axesNodeRef:z,linesNodeRef:E,attributesNodeRef:H,chartTitle:y});var e=Object(l.y)({data:n,ignoreOutliers:h,visBoxRef:T,axesScaleType:g,axesScaleRange:R,aggregatedData:m,aggregationConfig:v,unableToDrawConditions:G,attributesRef:J}),t=e.processedData,a=e.processedAggrData,r=e.min,c=e.max;Object(l.j)({svgNodeRef:L,axesNodeRef:z,axesRef:V,plotBoxRef:w,xScale:J.current.xScale,yScale:J.current.yScale,visBoxRef:T,alignmentConfig:j,axesScaleType:g,humanizerConfigRef:P,drawBgTickLines:{y:!0,x:!1}}),Object(l.m)({index:i,processedData:t,nameKey:b,linesNodeRef:E,linesRef:q,curveInterpolation:p,xScale:J.current.xScale,yScale:J.current.yScale,highlightMode:O,aggregationConfig:v,processedAggrData:a,readOnly:A}),!A&&E.current&&E.current.selectChildren().size()>s.c&&E.current.classed("optimizeRendering",!0),A||Object(l.l)({index:i,nameKey:b,data:n,axesScaleType:g,highlightMode:O,syncHoverState:x,visAreaRef:B,attributesRef:J,plotBoxRef:w,visBoxRef:T,svgNodeRef:L,bgRectNodeRef:M,attributesNodeRef:H,xAxisLabelNodeRef:I,yAxisLabelNodeRef:K,linesNodeRef:E,highlightedNodeRef:F,aggregationConfig:v,alignmentConfig:j}),Object(l.k)({index:i,plotBoxRef:w,plotNodeRef:k,visBoxRef:T,axesRef:V,attributesRef:J,linesRef:q,svgNodeRef:L,axesScaleType:g,min:r,max:c,axesScaleRange:R,zoom:N,onZoomChange:_,readOnly:A,unableToDrawConditions:G}),Object(l.u)({renderArr:G,visAreaRef:B,attributesRef:J,readOnly:A,syncHoverState:x})}()}var U=r.a.useCallback((function(e){(null===e||void 0===e?void 0:e.length)&&(Z.current=window.requestAnimationFrame(Q))}),[n,N,h,O,g,R,p,v,A,j,C]),W=r.a.useCallback((function(){Z.current&&window.cancelAnimationFrame(Z.current)}),[]);return Object(u.a)(U,D,W),r.a.useEffect((function(){return Z.current=window.requestAnimationFrame(Q),function(){Z.current&&window.cancelAnimationFrame(Z.current)}}),[n,N,h,O,g,R,p,v,A,j,C]),r.a.useImperativeHandle(t,(function(){return{setActiveLineAndCircle:function(e){var t,n,a=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];null===(t=(n=J.current).setActiveLineAndCircle)||void 0===t||t.call(n,e,a,r)},updateHoverAttributes:function(e,t){var n,a;null===(n=(a=J.current).updateHoverAttributes)||void 0===n||n.call(a,e,t)},clearHoverAttributes:function(){var e,t;null===(e=(t=J.current).clearHoverAttributes)||void 0===e||e.call(t)},setFocusedState:function(e){J.current.focusedState=e}}})),Object(f.jsx)(o.a,{children:Object(f.jsx)("div",{ref:D,className:c()("LineChart",{zoomMode:!A&&(null===N||void 0===N?void 0:N.active)}),children:Object(f.jsx)("div",{ref:B})})})}));d.displayName="LineChart",t.a=r.a.memo(d)},655:function(e,t,n){}}]);
//# sourceMappingURL=RunDetailMetricsAndSystemTab.js.map?version=13e1dd5a56cb19aa9df8