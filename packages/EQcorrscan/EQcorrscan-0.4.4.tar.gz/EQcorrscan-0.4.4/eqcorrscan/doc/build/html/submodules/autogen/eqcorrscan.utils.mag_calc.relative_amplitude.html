<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17: http://docutils.sourceforge.net/" />

    <title>5.2.8.1.6. eqcorrscan.utils.mag_calc.relative_amplitude &#8212; EQcorrscan 0.4.3 documentation</title>
    <link rel="stylesheet" href="../../_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <script id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/language_data.js"></script>
    <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/x-mathjax-config">MathJax.Hub.Config({"tex2jax": {"inlineMath": [["$", "$"], ["\\(", "\\)"]], "processEscapes": true, "ignoreClass": "document", "processClass": "math|output_area"}})</script>
    <link rel="shortcut icon" href="../../_static/EQcorrscan_logo.ico"/>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="5.2.8.1.7. eqcorrscan.utils.mag_calc.relative_magnitude" href="eqcorrscan.utils.mag_calc.relative_magnitude.html" />
    <link rel="prev" title="5.2.8.1.5. eqcorrscan.utils.mag_calc.svd_moments" href="eqcorrscan.utils.mag_calc.svd_moments.html" />
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">
<script type="text/javascript" src="../../_static/js/jquery-1.12.4.min.js "></script>
<script type="text/javascript" src="../../_static/js/jquery-fix.js "></script>
<script type="text/javascript" src="../../_static/bootstrap-3.4.1/js/bootstrap.min.js "></script>
<script type="text/javascript" src="../../_static/bootstrap-sphinx.js "></script>

  </head><body>

  <div id="navbar" class="navbar navbar-default navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="../../index.html"><span><img src="../../_static/EQcorrscan_logo.jpg"></span>
          EQcorrscan</a>
        <span class="navbar-text navbar-version pull-left"><b>0.4</b></span>
      </div>

        <div class="collapse navbar-collapse nav-collapse">
          <ul class="nav navbar-nav">
            
            
              <li class="dropdown globaltoc-container">
  <a role="button"
     id="dLabelGlobalToc"
     data-toggle="dropdown"
     data-target="#"
     href="../../index.html">Site <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"
      role="menu"
      aria-labelledby="dLabelGlobalToc"><ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../intro.html">1. Introduction to the EQcorrscan package</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../installation.html">2. EQcorrscan installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../updates.html">3. What’s new</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tutorial.html">4. EQcorrscan tutorials</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../api.html">5. EQcorrscan API</a></li>
</ul>
</ul>
</li>
              
                <li class="dropdown">
  <a role="button"
     id="dLabelLocalToc"
     data-toggle="dropdown"
     data-target="#"
     href="#">Page <b class="caret"></b></a>
  <ul class="dropdown-menu localtoc"
      role="menu"
      aria-labelledby="dLabelLocalToc"><ul>
<li><a class="reference internal" href="#">5.2.8.1.6. eqcorrscan.utils.mag_calc.relative_amplitude</a></li>
</ul>
</ul>
</li>
              
            
            
              
                
  <li>
    <a href="eqcorrscan.utils.mag_calc.svd_moments.html" title="Previous Chapter: 5.2.8.1.5. eqcorrscan.utils.mag_calc.svd_moments"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm hidden-tablet">&laquo; 5.2.8.1.5. eq...</span>
    </a>
  </li>
  <li>
    <a href="eqcorrscan.utils.mag_calc.relative_magnitude.html" title="Next Chapter: 5.2.8.1.7. eqcorrscan.utils.mag_calc.relative_magnitude"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm hidden-tablet">5.2.8.1.7. eq... &raquo;</span>
    </a>
  </li>
              
            
            
            
            
              <li class="hidden-sm">
<div id="sourcelink">
  <a href="../../_sources/submodules/autogen/eqcorrscan.utils.mag_calc.relative_amplitude.rst.txt"
     rel="nofollow">Source</a>
</div></li>
            
          </ul>

          
            
<form class="navbar-form navbar-right" action="../../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          
        </div>
    </div>
  </div>

<div class="container">
  <div class="row">
    <div class="body col-md-12 content" role="main">
      
  <section id="eqcorrscan-utils-mag-calc-relative-amplitude">
<h1><span class="section-number">5.2.8.1.6. </span>eqcorrscan.utils.mag_calc.relative_amplitude<a class="headerlink" href="#eqcorrscan-utils-mag-calc-relative-amplitude" title="Permalink to this headline">¶</a></h1>
<dl class="py function">
<dt id="eqcorrscan.utils.mag_calc.relative_amplitude">
<code class="sig-prename descclassname">eqcorrscan.utils.mag_calc.</code><code class="sig-name descname">relative_amplitude</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">st1</span></em>, <em class="sig-param"><span class="n">st2</span></em>, <em class="sig-param"><span class="n">event1</span></em>, <em class="sig-param"><span class="n">event2</span></em>, <em class="sig-param"><span class="n">noise_window</span><span class="o">=</span><span class="default_value">- 20, - 1</span></em>, <em class="sig-param"><span class="n">signal_window</span><span class="o">=</span><span class="default_value">- 0.5, 20</span></em>, <em class="sig-param"><span class="n">min_snr</span><span class="o">=</span><span class="default_value">1.5</span></em>, <em class="sig-param"><span class="n">use_s_picks</span><span class="o">=</span><span class="default_value">False</span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/eqcorrscan/utils/mag_calc.html#relative_amplitude"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#eqcorrscan.utils.mag_calc.relative_amplitude" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute the relative amplitudes between two streams.</p>
<p>Uses standard deviation of amplitudes within trace. Relative amplitudes are
computed as:</p>
<div class="math notranslate nohighlight">
\[\frac{std(tr2)}{std(tr1)}\]</div>
<p>where tr1 is a trace from st1 and tr2 is a matching (seed ids match) trace
from st2.  The standard deviation of the amplitudes is computed in the
signal window given. If the ratio of amplitudes between the signal window
and the noise window is below <cite>min_snr</cite> then no result is returned for that
trace. The SNR here is defined as the ratio of RMS-amplitudes of signal
and noise (equal to ratio of L2-norms of signal and noise, but normalized
for signal length). The Windows are computed relative to the first pick
for that station.</p>
<p>If one stream has insufficient data to estimate noise amplitude, the noise
amplitude of the other will be used.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>st1</strong> (<cite>obspy.core.stream.Stream</cite>) – Stream for event1</p></li>
<li><p><strong>st2</strong> (<cite>obspy.core.stream.Stream</cite>) – Stream for event2</p></li>
<li><p><strong>event1</strong> (<cite>obspy.core.event.Event</cite>) – Event with picks (nothing else is needed)</p></li>
<li><p><strong>event2</strong> (<cite>obspy.core.event.Event</cite>) – Event with picks (nothing else is needed)</p></li>
<li><p><strong>noise_window</strong> (<em>tuple of float</em>) – Start and end of noise window in seconds relative to pick</p></li>
<li><p><strong>signal_window</strong> (<em>tuple of float</em>) – Start and end of signal window in seconds relative to pick</p></li>
<li><p><strong>min_snr</strong> (<a class="reference external" href="https://docs.python.org/2.7/library/functions.html#float" title="(in Python v2.7)"><em>float</em></a>) – Minimum signal-to-noise ratio allowed to make a measurement</p></li>
<li><p><strong>use_s_picks</strong> (<a class="reference external" href="https://docs.python.org/2.7/library/functions.html#bool" title="(in Python v2.7)"><em>bool</em></a>) – Whether to allow relative amplitude estimates to be made from S-picks.
Note that noise and signal windows are relative to pick-times, so using
an S-pick might result in a noise window including P-energy.</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/2.7/library/stdtypes.html#dict" title="(in Python v2.7)">dict</a>, <a class="reference external" href="https://docs.python.org/2.7/library/stdtypes.html#dict" title="(in Python v2.7)">dict</a>, <a class="reference external" href="https://docs.python.org/2.7/library/stdtypes.html#dict" title="(in Python v2.7)">dict</a></p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>Dictionary of relative amplitudes keyed by seed-id
Dictionary of signal-to-noise ratios for st1
Dictionary of signal-to-noise ratios for st2</p>
</dd>
</dl>
</dd></dl>

</section>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
    </p>
    <p>
        &copy; Copyright 2015-2021: EQcorrscan developers.<br/>
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 3.2.1.<br/>
    </p>
  </div>
</footer>
  </body>
</html>