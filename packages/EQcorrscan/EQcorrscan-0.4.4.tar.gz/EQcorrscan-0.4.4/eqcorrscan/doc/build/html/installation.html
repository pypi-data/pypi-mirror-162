<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17: http://docutils.sourceforge.net/" />

    <title>2. EQcorrscan installation &#8212; EQcorrscan 0.4.3 documentation</title>
    <link rel="stylesheet" href="_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/language_data.js"></script>
    <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/x-mathjax-config">MathJax.Hub.Config({"tex2jax": {"inlineMath": [["$", "$"], ["\\(", "\\)"]], "processEscapes": true, "ignoreClass": "document", "processClass": "math|output_area"}})</script>
    <link rel="shortcut icon" href="_static/EQcorrscan_logo.ico"/>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="3. What’s new" href="updates.html" />
    <link rel="prev" title="1. Introduction to the EQcorrscan package" href="intro.html" />
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">
<script type="text/javascript" src="_static/js/jquery-1.12.4.min.js "></script>
<script type="text/javascript" src="_static/js/jquery-fix.js "></script>
<script type="text/javascript" src="_static/bootstrap-3.4.1/js/bootstrap.min.js "></script>
<script type="text/javascript" src="_static/bootstrap-sphinx.js "></script>

  </head><body>

  <div id="navbar" class="navbar navbar-default navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="index.html"><span><img src="_static/EQcorrscan_logo.jpg"></span>
          EQcorrscan</a>
        <span class="navbar-text navbar-version pull-left"><b>0.4</b></span>
      </div>

        <div class="collapse navbar-collapse nav-collapse">
          <ul class="nav navbar-nav">
            
            
              <li class="dropdown globaltoc-container">
  <a role="button"
     id="dLabelGlobalToc"
     data-toggle="dropdown"
     data-target="#"
     href="index.html">Site <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"
      role="menu"
      aria-labelledby="dLabelGlobalToc"><ul class="current">
<li class="toctree-l1"><a class="reference internal" href="intro.html">1. Introduction to the EQcorrscan package</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">2. EQcorrscan installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="updates.html">3. What’s new</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorial.html">4. EQcorrscan tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="api.html">5. EQcorrscan API</a></li>
</ul>
</ul>
</li>
              
                <li class="dropdown">
  <a role="button"
     id="dLabelLocalToc"
     data-toggle="dropdown"
     data-target="#"
     href="#">Page <b class="caret"></b></a>
  <ul class="dropdown-menu localtoc"
      role="menu"
      aria-labelledby="dLabelLocalToc"><ul>
<li><a class="reference internal" href="#">2. EQcorrscan installation</a><ul>
<li><a class="reference internal" href="#installation-without-conda">2.1. Installation without conda</a><ul>
<li><a class="reference internal" href="#non-python-dependencies-ubuntu">2.1.1. Non-Python dependencies–Ubuntu:</a></li>
<li><a class="reference internal" href="#non-python-dependencies-osx">2.1.2. Non-Python dependencies–OSX:</a><ul>
<li><a class="reference internal" href="#homebrew">2.1.2.1. Homebrew</a></li>
<li><a class="reference internal" href="#macports">2.1.2.2. MacPorts</a></li>
</ul>
</li>
<li><a class="reference internal" href="#non-python-dependencies-windows">2.1.3. Non-Python dependencies–Windows:</a></li>
<li><a class="reference internal" href="#eqcorrscan-install-via-pip">2.1.4. EQcorrscan install via pip:</a></li>
<li><a class="reference internal" href="#installation-from-source">2.1.5. Installation from source</a></li>
<li><a class="reference internal" href="#using-intel-s-mkl">2.1.6. Using Intel’s MKL</a></li>
</ul>
</li>
<li><a class="reference internal" href="#notes">2.2. Notes</a></li>
</ul>
</li>
</ul>
</ul>
</li>
              
            
            
              
                
  <li>
    <a href="intro.html" title="Previous Chapter: 1. Introduction to the EQcorrscan package"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm hidden-tablet">&laquo; 1. Introducti...</span>
    </a>
  </li>
  <li>
    <a href="updates.html" title="Next Chapter: 3. What’s new"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm hidden-tablet">3. What’s new &raquo;</span>
    </a>
  </li>
              
            
            
            
            
              <li class="hidden-sm">
<div id="sourcelink">
  <a href="_sources/installation.rst.txt"
     rel="nofollow">Source</a>
</div></li>
            
          </ul>

          
            
<form class="navbar-form navbar-right" action="search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          
        </div>
    </div>
  </div>

<div class="container">
  <div class="row">
    <div class="body col-md-12 content" role="main">
      
  <section id="eqcorrscan-installation">
<h1><span class="section-number">2. </span>EQcorrscan installation<a class="headerlink" href="#eqcorrscan-installation" title="Permalink to this headline">¶</a></h1>
<p>EQcorrscan is a Python package with C extensions. The C extensions in EQcorrscan
have their own dependencies on compiled libraries. We heavily recommend installing
EQcorrscan using conda because this will:</p>
<ul class="simple">
<li><p>make your life easier;</p></li>
<li><p>separate your EQcorrscan install from your system Python, meaning you can
experiment to your hearts-content without breaking your operating system (yay);</p></li>
<li><p>ensure that compiled modules are compiled using the correct C-compiler against
the correct libraries</p></li>
</ul>
<p>If you do not have either a miniconda or anaconda installation you can follow
the <a href="https://docs.conda.io/en/latest/miniconda.html" target="_blank">conda-install</a> instructions.</p>
<p>If you do not already have a conda environment we recommend creating one
with the following:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>conda create -n eqcorrscan -c conda-forge eqcorrscan
<span class="nb">source</span> activate eqcorrscan
</pre></div>
</div>
<p>This will create an environment called eqcorrscan and install eqcorrscan and its
dependancies in that environment.</p>
<p>If you already have a conda environment that you want to use then to install EQcorrscan
you can simply run:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>conda install -c conda-forge eqcorrscan
</pre></div>
</div>
<section id="installation-without-conda">
<h2><span class="section-number">2.1. </span>Installation without conda<a class="headerlink" href="#installation-without-conda" title="Permalink to this headline">¶</a></h2>
<p>Installing EQcorrscan without conda involves two steps:</p>
<ol class="arabic simple">
<li><p>Installing fftw3 libraries;</p></li>
<li><p>Installing python dependancies and EQcorrscan.</p></li>
</ol>
<p>How you undertake the first step depends on your operating system and system
package manager.</p>
<section id="non-python-dependencies-ubuntu">
<h3><span class="section-number">2.1.1. </span>Non-Python dependencies–Ubuntu:<a class="headerlink" href="#non-python-dependencies-ubuntu" title="Permalink to this headline">¶</a></h3>
<p>Prior to installing the python routines you will need to install the fftw
library.  On linux use apt (or your default package manager - note you may need
sudo access):</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>apt-get install libfftw3-dev
</pre></div>
</div>
<p>Note that you will need to ensure you have the single-precision libraries of
fftw3 (files named fftw3f…). On CentOS you can install the <cite>fftw-libs</cite> package.</p>
</section>
<section id="non-python-dependencies-osx">
<h3><span class="section-number">2.1.2. </span>Non-Python dependencies–OSX:<a class="headerlink" href="#non-python-dependencies-osx" title="Permalink to this headline">¶</a></h3>
<p>For MacOS/OS-X systems we have tested using homebrew and macports (fink options
are available, but we haven’t tested them).</p>
<section id="homebrew">
<h4><span class="section-number">2.1.2.1. </span>Homebrew<a class="headerlink" href="#homebrew" title="Permalink to this headline">¶</a></h4>
<p>You will need a recent version of gcc (the homebrew gcc-4.9 port has issues with openMP).
We have tested the following and found it to work (note that you may need to prepend
sudo depending on your configuration):</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>brew install gcc6
brew install fftw
</pre></div>
</div>
<p>Then run the following to install EQcorrscan (note the need to select CC=gcc, you can
install using clang, but you will need additional libraries for openmp support):</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nv">CC</span><span class="o">=</span>gcc pip install eqcorrscan
</pre></div>
</div>
</section>
<section id="macports">
<h4><span class="section-number">2.1.2.2. </span>MacPorts<a class="headerlink" href="#macports" title="Permalink to this headline">¶</a></h4>
<p>The following has been tested and found to work (note that you may need to prepend
sudo depending on your configuration):</p>
<ol class="arabic simple">
<li><p>Install an up-to-date gcc (gcc is needed for openmp compatibility) - any gcc should work (&gt;4), here we use gcc6 for example:</p></li>
</ol>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>port install gcc6
</pre></div>
</div>
<ol class="arabic simple" start="2">
<li><p>Install python from macports (tested for python35, but its up to you)</p></li>
</ol>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>port install python35<span class="sb">`</span>
<span class="c1"># optional: select python35 as default python for terminal:</span>
port <span class="k">select</span> --set python python35
</pre></div>
</div>
<ol class="arabic simple" start="3">
<li><p>Install numpy and pip from macports:</p></li>
</ol>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>port install py35-numpy py35-pip
<span class="c1"># optional, select pip35 as default pip</span>
port <span class="k">select</span> --set pip pip35
</pre></div>
</div>
<ol class="arabic" start="4">
<li><p>Install fftw3 from source:</p>
<blockquote>
<div><ol class="loweralpha simple">
<li><p><a href="http://www.fftw.org/fftw-3.3.7.tar.gz" target="_blank">Download</a> - link to fftw 3.3.7, most recent as of 10/01/2018</p></li>
<li><p>unzip/untar</p></li>
<li><p>Run the following from within the expanded directory:</p></li>
</ol>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>./configure --enable-threads --enable-float <span class="o">&amp;&amp;</span> make
make install
./configure --enable-threads <span class="o">&amp;&amp;</span> make <span class="c1"># Need both double and float precision files</span>
make install
</pre></div>
</div>
</div></blockquote>
</li>
<li><p>Run: (if you didn’t run the <cite>port select –set pip pip35</cite> command you will need to replace <cite>pip</cite> with <cite>pip35</cite>)</p></li>
</ol>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nv">CC</span><span class="o">=</span>gcc pip install eqcorrscan
</pre></div>
</div>
</section>
</section>
<section id="non-python-dependencies-windows">
<h3><span class="section-number">2.1.3. </span>Non-Python dependencies–Windows:<a class="headerlink" href="#non-python-dependencies-windows" title="Permalink to this headline">¶</a></h3>
<p>For Windows systems you should follow the instructions on the <a href="http://www.fftw.org/install/windows.html" target="_blank">fftw-windows install</a>
page and use the pre-compiled dynamic libraries. These should be installed
somewhere on your system path, or the install location added to your path.
The correlation routines use openMP for parallel workflows, however, some aspects
of this run into issues with version of MSVC &lt; 10.0 (due to old C standards being
used), as such, by default, the correlation routines are compiled as serial
workflows on windows.  If you have a need for this threading in windows please
get in touch with the developers.</p>
</section>
<section id="eqcorrscan-install-via-pip">
<h3><span class="section-number">2.1.4. </span>EQcorrscan install via pip:<a class="headerlink" href="#eqcorrscan-install-via-pip" title="Permalink to this headline">¶</a></h3>
<p>Once you have installed fftw the EQcorrscan install should be as simple as:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>pip install eqcorrscan
</pre></div>
</div>
</section>
<section id="installation-from-source">
<h3><span class="section-number">2.1.5. </span>Installation from source<a class="headerlink" href="#installation-from-source" title="Permalink to this headline">¶</a></h3>
<p>pip pulls the package from the <a href="https://pypi.org/project/EQcorrscan/" target="_blank">PyPi</a> package repository and runs the <cite>setup.py</cite> file.
If instead you wish to install from source, download the package (either by cloning
the git repository, or by downloading the source code) from <a href="https://github.com/eqcorrscan/EQcorrscan" target="_blank">github</a>,
change directory to the <cite>EQcorrscan</cite> directory and run:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>python setup.py install
</pre></div>
</div>
<p>If this fails because the default compiler is <cite>clang</cite> you can run:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nv">CC</span><span class="o">=</span>gcc python setup.py install
</pre></div>
</div>
<p>Note though that this will compile EQcorrscan using a different compiler than
used to build your Python, which may have unwanted effects, if you do this you
MUST test you install using the instructions here: <a class="reference internal" href="intro.html#runningtests"><span class="std std-ref">Running tests</span></a>.</p>
</section>
<section id="using-intel-s-mkl">
<h3><span class="section-number">2.1.6. </span>Using Intel’s MKL<a class="headerlink" href="#using-intel-s-mkl" title="Permalink to this headline">¶</a></h3>
<p>For versions &gt;= 0.3.0 EQcorrscan supports compilation against the Intel Math Kernel
Libraries (MKL). This has shown <a href="https://github.com/eqcorrscan/EQcorrscan/pull/168" target="_blank">speed ups</a> compared to the standard FFTW library.
To enable this you must install MKL before compiling EQcorrscan.  MKL is available from
most package managers (including conda). Once you have MKL installed you can
follow the <a class="reference internal" href="#installation-from-source">Installation from source</a> section.  Check that near the top of the
install that the MKL libraries are found.</p>
</section>
</section>
<section id="notes">
<h2><span class="section-number">2.2. </span>Notes<a class="headerlink" href="#notes" title="Permalink to this headline">¶</a></h2>
<p>You may have issues with these installs if you don’t have numpy installed: but if
you don’t have numpy installed then you have bigger issues…</p>
<p>If you plan to generate a grid of synthetic templates you will need to have
grid csv files, which the authors have previously used NonLinLoc to generate.
This is not provided here and should be sourced from <a href="http://alomax.free.fr/nlloc/" target="_blank">NonLinLoc</a>. This will provide
the Grid2Time routine which is required to set-up a lag-time grid for your
velocity model.  You should read the NonLinLoc documentation for more
information regarding how this process works and the input files you are
required to give.</p>
</section>
</section>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
    </p>
    <p>
        &copy; Copyright 2015-2021: EQcorrscan developers.<br/>
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 3.2.1.<br/>
    </p>
  </div>
</footer>
  </body>
</html>